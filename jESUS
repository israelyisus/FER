import random

lista_auto = []
lista_regis= []
patente=""
nombre=""
opc=0
tipo=""
precio=0
marca=""
multas=""
valormulta=""
fecha=""
valor=0


def ingresar_patente():
    while True:
        patente = input("Ingrese la patente: ")
        if any(caracter.isalpha() for caracter in patente) and any(caracter.isdigit() for caracter in patente):
            print("Patente ingresada correctamente...")
            return patente
        else:
            print("Ingrese la patente nuevamente: ")

def ingresar_nombre():
    nombre = input("Nombre del titular: ")
    return nombre

def ingresar_tipo():
    tipo = input("Ingrese el tipo de vehiculo: ")
    return tipo

def ingresar_marca():
    while True:
        marca = input("Ingrese la marca: ")
        if len(marca) < 2 or len(marca) > 15 or sum(caracter.isalpha() for caracter in marca) < 2:
            print("Ingrese la marca nuevamente.")
        else:
            print("Marca registrada con exito.")
            return marca

def ingresar_multas():
    multas = input("Ingrese el nombre de la multa: ")
    valormulta = input("Ingrese el valor de la multa: ")
    return multas, valormulta

def ingresar_fecha():
    while True:
        fecha = input("Ingrese la fecha de registro del auto (DIA/MES/AÑO): ")
        if '/' in fecha:
            fecha = fecha.split('/')
            if len(fecha) == 3 and fecha[0].isdigit() and fecha[1].isdigit() and fecha[2].isdigit():
                print("Fecha registrada correctamente.")
                return fecha
            else:
                print("Fecha incorrecta. El formato debe ser DIA/MES/AÑO.")
        else:
            print("Fecha incorrecta. El formato debe ser DIA/MES/AÑO.")

def ingresar_precio():
    while True:
        precio = input("Precio: ")
        if any(caracter.isdigit() for caracter in precio):
            valor = int(''.join(caracter for caracter in precio if caracter.isdigit()))
            if valor <= 5000000:
                print("Valor incorrecto")
            else:
                return precio
        else:
            print("Valor incorrecto")

def grabar_auto(lista_auto):
    patente = ingresar_patente()
    nombre = ingresar_nombre()
    tipo = ingresar_tipo()
    marca = ingresar_marca()
    multas, valormulta = ingresar_multas()
    fecha = ingresar_fecha()
    precio = ingresar_precio()
    lista_regis = [patente, nombre, tipo, marca, multas, fecha, precio, valormulta]
    lista_auto.append(lista_regis)
    print("Registro completado exitosamente.")

def buscar_auto(lista_auto):
    patente = input("Ingrese la patente: ")
    for item in lista_auto:
        if item[0] == patente:
            print(f'''
            Patente: {item[0]}
            Nombre titular: {item[1]}
            Tipo: {item[2]}
            Marca: {item[3]}
            Multas: {item[4]} ${item[7]}
            Fecha: {item[5]}
            Precio: ${item[6]}
            ''')
            return
    print("No se encontro ninguna patente con esa placa.")

def descargar_certificados(lista_auto):
    nombre_archivo = input("Ingrese el nombre del archivo para guardar los certificados (sin la extension .txt): ")
    nombre_archivo += ".txt"
    with open(nombre_archivo, "w") as archivo:
        for item in lista_auto:
            archivo.write('Certificado de Emision de Contaminantes:\n')
            archivo.write(f'Nombre del certificado: Emision de Contaminantes\n')
            archivo.write(f'Patente del auto: {item[0]}\n')
            archivo.write(f'Datos del dueño actual:\n')
            archivo.write(f'Nombre del titular: {item[1]}\n')
            archivo.write(f'Tipo de vehiculo: {item[2]}\n')
            archivo.write(f'Marca del vehiculo: {item[3]}\n')
            archivo.write(f'Valor del certificado: ${random.randint(1500, 3500)}\n')
            archivo.write('\n')

            archivo.write('Certificado de Anotaciones Vigentes:\n')
            archivo.write(f'Nombre del certificado: Anotaciones Vigentes\n')
            archivo.write(f'Patente del auto: {item[0]}\n')
            archivo.write(f'Datos del dueño actual:\n')
            archivo.write(f'Nombre del titular: {item[1]}\n')
            archivo.write(f'Tipo de vehiculo: {item[2]}\n')
            archivo.write(f'Marca del vehiculo: {item[3]}\n')
            archivo.write(f'Valor del certificado: ${random.randint(1500, 3500)}\n')
            archivo.write('\n')

            archivo.write('Certificado de Multas:\n')
            archivo.write(f'Nombre del certificado: Multas\n')
            archivo.write(f'Patente del auto: {item[0]}\n')
            archivo.write(f'Datos del dueño actual:\n')
            archivo.write(f'Nombre del titular: {item[1]}\n')
            archivo.write(f'Tipo de vehculo: {item[2]}\n')
            archivo.write(f'Marca del vehiculo: {item[3]}\n')
            archivo.write(f'Valor de la multa: {item[7]}\n')
            archivo.write('\n')

    print(f"Los certificados han sido guardados en el archivo: {nombre_archivo}")

def salir_programa():
    print("Hasta pronto:3")
    print("Desarrollado por [Alhvid Guzman byYisus]")
    print("Version del programa: 1.0")

def main():
    lista_auto = []
    while True:
        print('''Menu
        1) Grabar
        2) Buscar auto
        3) Descargar certificados
        4) Salir''')
        opc = int(input("Elija una opcion: "))

        if opc == 4:
            salir_programa()
            break
        elif opc == 1:
            grabar_auto(lista_auto)
        elif opc == 2:
            buscar_auto(lista_auto)
        elif opc == 3:
            descargar_certificados(lista_auto)

if __name__ == "__main__":
    main()
